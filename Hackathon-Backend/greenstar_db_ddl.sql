-- MySQL Script generated by MySQL Workbench
-- 03/06/19 09:53:45
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema mydb
-- -----------------------------------------------------
-- -----------------------------------------------------
-- Schema greenstar
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema greenstar
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `greenstar` DEFAULT CHARACTER SET utf8 ;
USE `greenstar` ;

-- -----------------------------------------------------
-- Table `greenstar`.`api_tokens`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `greenstar`.`api_tokens` ;

CREATE TABLE IF NOT EXISTS `greenstar`.`api_tokens` (
  `token` VARCHAR(500) NOT NULL,
  `userid` VARCHAR(50) NOT NULL,
  `start_time` DATETIME NOT NULL,
  `end_time` DATETIME,
  `last_updated_dt` DATETIME NOT NULL,
  PRIMARY KEY (`token`),
  UNIQUE INDEX `token_UNIQUE` (`token` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'table to store the api tokens';


-- -----------------------------------------------------
-- Table `greenstar`.`school`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `greenstar`.`school` ;

CREATE TABLE IF NOT EXISTS `greenstar`.`school` (
  `ID` BIGINT(20) NOT NULL AUTO_INCREMENT,
  `SCHOOL_NAME` VARCHAR(90) NOT NULL,
  `CITY_NAME` VARCHAR(45) NOT NULL,
  `ADDRESS` VARCHAR(500) NOT NULL,
  `DISTRICT` VARCHAR(500) NOT NULL,
  `STATE` VARCHAR(200) NOT NULL,
  `CREATED_USER_ID` VARCHAR(90) NOT NULL,
  `CREATED_DTM` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `LAST_UPDATED_USER_ID` VARCHAR(90) NOT NULL,
  `LAST_UPDATED_DTM` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`ID`))
ENGINE = InnoDB
AUTO_INCREMENT = 2
DEFAULT CHARACTER SET = utf8
COMMENT = 'School and Class Information';


-- -----------------------------------------------------
-- Table `greenstar`.`class`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `greenstar`.`class` ;

CREATE TABLE IF NOT EXISTS `greenstar`.`class` (
  `ID` BIGINT(20) NOT NULL AUTO_INCREMENT,
  `SCHOOL_ID` BIGINT(20) NOT NULL,
  `CLASS_NAME` VARCHAR(45) NOT NULL,
  `SECTION` VARCHAR(45) NOT NULL,
  `CREATED_USER_ID` VARCHAR(90) NOT NULL,
  `CREATED_DTM` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `LAST_UPDATED_USER_ID` VARCHAR(90) NOT NULL,
  `LAST_UPDATED_DTM` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`ID`),
  INDEX `ID_idx` (`SCHOOL_ID` ASC),
  CONSTRAINT `SCHOOL_ID`
    FOREIGN KEY (`SCHOOL_ID`)
    REFERENCES `greenstar`.`school` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
AUTO_INCREMENT = 5
DEFAULT CHARACTER SET = utf8
COMMENT = 'Class Information';


-- -----------------------------------------------------
-- Table `greenstar`.`india_state_district`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `greenstar`.`india_state_district` ;

CREATE TABLE IF NOT EXISTS `greenstar`.`india_state_district` (
  `id` INT(11) NOT NULL AUTO_INCREMENT,
  `state` VARCHAR(200) NOT NULL,
  `district` VARCHAR(200) NOT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 703
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `greenstar`.`main_ui_menu`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `greenstar`.`main_ui_menu` ;

CREATE TABLE IF NOT EXISTS `greenstar`.`main_ui_menu` (
  `ID` BIGINT(20) NOT NULL AUTO_INCREMENT,
  `MENU_NAME` VARCHAR(50) NOT NULL,
  `DESCRIPTION` VARCHAR(200) NOT NULL,
  `CREATED_USER_ID` VARCHAR(90) NOT NULL,
  `CREATED_DTM` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `LAST_UPDATED_USER_ID` VARCHAR(90) NOT NULL,
  `LAST_UPDATED_DTM` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`ID`))
ENGINE = InnoDB
AUTO_INCREMENT = 8
DEFAULT CHARACTER SET = utf8
COMMENT = 'MAin UI Menu Information';


-- -----------------------------------------------------
-- Table `greenstar`.`measurable_param`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `greenstar`.`measurable_param` ;

CREATE TABLE IF NOT EXISTS `greenstar`.`measurable_param` (
  `ID` BIGINT(20) NOT NULL AUTO_INCREMENT,
  `SCHOOL_ID` BIGINT(20) NOT NULL,
  `PARAMETER_TITLE` VARCHAR(90) NOT NULL,
  `PARAMETER_DESC` VARCHAR(255) NOT NULL,
  `CREATED_USER_ID` VARCHAR(90) NOT NULL,
  `CREATED_DTM` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `LAST_UPDATED_USER_ID` VARCHAR(90) NOT NULL,
  `LAST_UPDATED_DTM` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`ID`),
  INDEX `FK_MEASURABLE_PARAM_SCHOOL_MAPPING_idx` (`SCHOOL_ID` ASC),
  CONSTRAINT `FK_MEASURABLE_PARAM_SCHOOL_MAPPING`
    FOREIGN KEY (`SCHOOL_ID`)
    REFERENCES `greenstar`.`school` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
AUTO_INCREMENT = 4
DEFAULT CHARACTER SET = utf8
COMMENT = 'Measurable parameters';


-- -----------------------------------------------------
-- Table `greenstar`.`student`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `greenstar`.`student` ;

CREATE TABLE IF NOT EXISTS `greenstar`.`student` (
  `ID` BIGINT(20) NOT NULL AUTO_INCREMENT,
  `STUDENT_NAME` VARCHAR(90) NOT NULL,
  `DOB` DATE NULL DEFAULT NULL,
  `ADDRESS` VARCHAR(45) NULL,
  `CREATED_USER_ID` VARCHAR(90) NOT NULL,
  `CREATED_DTM` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `LAST_UPDATED_USER_ID` VARCHAR(90) NOT NULL,
  `LAST_UPDATED_DTM` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`ID`))
ENGINE = InnoDB
AUTO_INCREMENT = 13
DEFAULT CHARACTER SET = utf8
COMMENT = 'Student Information';


-- -----------------------------------------------------
-- Table `greenstar`.`student_school_assoc`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `greenstar`.`student_school_assoc` ;

CREATE TABLE IF NOT EXISTS `greenstar`.`student_school_assoc` (
  `ID` BIGINT(20) NOT NULL AUTO_INCREMENT,
  `STUDENT_DETAIL_ID` BIGINT(20) NOT NULL,
  `ROLL_ID` VARCHAR(45) NOT NULL,
  `CLASS_ID` BIGINT(20) NOT NULL,
  `TEAM_NAME` VARCHAR(45) NOT NULL,
  `STATUS` VARCHAR(45) NOT NULL,
  `CREATED_USER_ID` VARCHAR(90) NOT NULL,
  `CREATED_DTM` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `LAST_UPDATED_USER_ID` VARCHAR(90) NOT NULL,
  `LAST_UPDATED_DTM` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`ID`),
  INDEX `STUDENT_DETAIL_ID_idx` (`STUDENT_DETAIL_ID` ASC),
  INDEX `FK_STUDENT_CLASS_MAPPING_idx` (`CLASS_ID` ASC),
  CONSTRAINT `FK_STUDENTL_SCHOOL_ASSOCIATION`
    FOREIGN KEY (`STUDENT_DETAIL_ID`)
    REFERENCES `greenstar`.`student` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `FK_STUDENT_CLASS_MAPPING`
    FOREIGN KEY (`CLASS_ID`)
    REFERENCES `greenstar`.`class` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
AUTO_INCREMENT = 13
DEFAULT CHARACTER SET = utf8
COMMENT = 'Class and Student association';


-- -----------------------------------------------------
-- Table `greenstar`.`measurable_param_data`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `greenstar`.`measurable_param_data` ;

CREATE TABLE IF NOT EXISTS `greenstar`.`measurable_param_data` (
  `ID` BIGINT(20) NOT NULL AUTO_INCREMENT,
  `STUD_SCHL_ASSOC_ID` BIGINT(20) NOT NULL,
  `MEASURABLE_DATE` DATE NOT NULL,
  `MEASURABLE_PARAM_ID` BIGINT(20) NOT NULL,
  `MEASURABLE_PARAM_VALUE` INT(1) NOT NULL,
  `CREATED_USER_ID` VARCHAR(90) NOT NULL,
  `CREATED_DTM` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `LAST_UPDATED_USER_ID` VARCHAR(90) NOT NULL,
  `LAST_UPDATED_DTM` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`ID`),
  INDEX `FK_STUD_SCHL_AND_MEASURABLE_TXN_idx` (`STUD_SCHL_ASSOC_ID` ASC),
  INDEX `FK_MEASURABLE_PARAM_TRXN_DATA_idx` (`MEASURABLE_PARAM_ID` ASC),
  CONSTRAINT `FK_MEASURABLE_PARAM_TRXN_DATA`
    FOREIGN KEY (`MEASURABLE_PARAM_ID`)
    REFERENCES `greenstar`.`measurable_param` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `FK_STUD_SCHL_AND_MEASURABLE_TXN`
    FOREIGN KEY (`STUD_SCHL_ASSOC_ID`)
    REFERENCES `greenstar`.`student_school_assoc` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
AUTO_INCREMENT = 570
DEFAULT CHARACTER SET = utf8
COMMENT = 'Measurable transaction details';


-- -----------------------------------------------------
-- Table `greenstar`.`role_detail`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `greenstar`.`role_detail` ;

CREATE TABLE IF NOT EXISTS `greenstar`.`role_detail` (
  `ID` BIGINT(20) NOT NULL AUTO_INCREMENT,
  `ROLE_NAME` VARCHAR(50) NOT NULL,
  `DESCRIPTION` VARCHAR(200) NOT NULL,
  `CREATED_USER_ID` VARCHAR(90) NOT NULL,
  `CREATED_DTM` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `LAST_UPDATED_USER_ID` VARCHAR(90) NOT NULL,
  `LAST_UPDATED_DTM` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`ID`))
ENGINE = InnoDB
AUTO_INCREMENT = 4
DEFAULT CHARACTER SET = utf8
COMMENT = 'Role Information';


-- -----------------------------------------------------
-- Table `greenstar`.`role_menu_mapping`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `greenstar`.`role_menu_mapping` ;

CREATE TABLE IF NOT EXISTS `greenstar`.`role_menu_mapping` (
  `ID` BIGINT(20) NOT NULL AUTO_INCREMENT,
  `ROLE_ID` BIGINT(20) NOT NULL,
  `MENU_ID` BIGINT(20) NOT NULL,
  `CREATED_USER_ID` VARCHAR(90) NOT NULL,
  `CREATED_DTM` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `LAST_UPDATED_USER_ID` VARCHAR(90) NOT NULL,
  `LAST_UPDATED_DTM` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`ID`),
  INDEX `ROLE_ID_idx` (`ROLE_ID` ASC),
  INDEX `FK_ROLE_MENU_MAPPING_2_idx` (`MENU_ID` ASC),
  CONSTRAINT `FK_ROLE_MENU_MAPPING`
    FOREIGN KEY (`ROLE_ID`)
    REFERENCES `greenstar`.`role_detail` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `FK_ROLE_MENU_MAPPING_2`
    FOREIGN KEY (`MENU_ID`)
    REFERENCES `greenstar`.`main_ui_menu` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
AUTO_INCREMENT = 8
DEFAULT CHARACTER SET = utf8
COMMENT = 'Role Menu Mapping';


-- -----------------------------------------------------
-- Table `greenstar`.`school_holidays`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `greenstar`.`school_holidays` ;

CREATE TABLE IF NOT EXISTS `greenstar`.`school_holidays` (
  `ID` BIGINT(20) NOT NULL AUTO_INCREMENT,
  `SCHOOL_ID` BIGINT(20) NOT NULL,
  `FROM_DATE` DATE NOT NULL,
  `TO_DATE` DATE NOT NULL,
  `DESCRIPTION` VARCHAR(100) NOT NULL,
  `CREATED_USER_ID` VARCHAR(90) NOT NULL,
  `CREATED_DTM` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `LAST_UPDATED_USER_ID` VARCHAR(90) NOT NULL,
  `LAST_UPDATED_DTM` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`ID`),
  INDEX `SCHOOL_ID_idx` (`SCHOOL_ID` ASC),
  INDEX `SCHOOLHOLIDAY_ID_idx` (`SCHOOL_ID` ASC),
  CONSTRAINT `FK_SCHOOL_HOLIDAY_MAPPING`
    FOREIGN KEY (`SCHOOL_ID`)
    REFERENCES `greenstar`.`school` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
AUTO_INCREMENT = 3
DEFAULT CHARACTER SET = utf8
COMMENT = 'School holidays';


-- -----------------------------------------------------
-- Table `greenstar`.`school_weekend_working_days`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `greenstar`.`school_weekend_working_days` ;

CREATE TABLE IF NOT EXISTS `greenstar`.`school_weekend_working_days` (
  `ID` BIGINT(20) NOT NULL AUTO_INCREMENT,
  `SCHOOL_ID` BIGINT(20) NOT NULL,
  `WORKING_DATE` DATE NOT NULL,
  `REASON` VARCHAR(100) NOT NULL,
  `CREATED_USER_ID` VARCHAR(90) NOT NULL,
  `CREATED_DTM` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `LAST_UPDATED_USER_ID` VARCHAR(90) NOT NULL,
  `LAST_UPDATED_DTM` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`ID`),
  INDEX `SCHOOL_WEEKEND_WORK_ID_idx` (`SCHOOL_ID` ASC),
  CONSTRAINT `FK_SCHOOL_WEEKEND_WORKING_DAY_MAPPING`
    FOREIGN KEY (`SCHOOL_ID`)
    REFERENCES `greenstar`.`school` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
AUTO_INCREMENT = 3
DEFAULT CHARACTER SET = utf8
COMMENT = 'School weekend working days';


-- -----------------------------------------------------
-- Table `greenstar`.`user_role_mapping`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `greenstar`.`user_role_mapping` ;

CREATE TABLE IF NOT EXISTS `greenstar`.`user_role_mapping` (
  `ID` BIGINT(20) NOT NULL AUTO_INCREMENT,
  `USER_ID` VARCHAR(90) NOT NULL,
  `ROLE_ID` BIGINT(20) NOT NULL,
  `CREATED_USER_ID` VARCHAR(90) NOT NULL,
  `CREATED_DTM` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `LAST_UPDATED_USER_ID` VARCHAR(90) NOT NULL,
  `LAST_UPDATED_DTM` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`ID`),
  INDEX `FK_USER_ROLE_MENU_MAPPING_idx` (`ROLE_ID` ASC),
  CONSTRAINT `FK_USER_ROLE_MENU_MAPPING`
    FOREIGN KEY (`ROLE_ID`)
    REFERENCES `greenstar`.`role_detail` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
AUTO_INCREMENT = 4
DEFAULT CHARACTER SET = utf8
COMMENT = 'User and Role Mapping';


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
